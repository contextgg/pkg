package folder

import (
	"bytes"
	"context"
	"encoding/hex"
	"testing"
)

var str = `ffd8ffe000104a46494600010100000100010000ffdb0043000201010101010201010102020202020403020202020504040304060506060605060606070908060709070606080b08090a0a0a0a0a06080b0c0b0a0c090a0a0affdb004301020202020202050303050a0706070a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0affc20011080272027203012200021101031101ffc4001d000100020203010100000000000000000000010906080204070503ffc40014010100000000000000000000000000000000ffda000c03010002100310000001dfe000000000000001120000000000008240000890008240000000000000022400000409000000000000000000000000000000000000022400000000000000000001090000000000000000000000000000000000000000000000000209000000890890409000000000000000209000000000000011200000000890000000000000000000000000000000000000044800022400000000209044801120898240890000890011200000890010240000000000000209000000209209011200000008240010251211200000209204a0900001121121024000000000000000000000000000000000000000000112001120000020900112100900000000000000000000000000002240112044912112109112000000000112000000109109000000000000000000089e2562eb3fc2e91943171943171943171943171943171943171943171943171943171943171943171943171943171943171943171b136d541977c7a000000890000000000000000000000000001c79712837abdaea8ecf5b794d2a5ef0a215ef0a215ef0a215ef0a215ef0a215ef0a215ef0a215eec9442bde1442bde1442bde828897bc2887af7cd5d46930177b48577a7a080000000000002120002240000000000000071e5c4a0deaf6baa37b344f7b0b12000000000000000000ae0b1fae034800bbda42bbd3d040000000000000000000000000000000038f214b5d7bad14a5b8dbce00000011204120000000015c163f5c06900177b48577a7a08000112000008900212000000000224001a827be78ad5e740b4a8ab61692ab61692ab61692ab61692ab61692ab61692ab61692ab61692ab61692ab61692ab61693fb5580badf51a09b0d37a51200000ae0b1fae034800bbda42bbd3d04000000000000040900000112000007c6a35b85a5f0003b5be7a277be68ae9c5dfd3e1e09ba5a5b7b6698fdbdd61a49e7f635252579b5f85601a9c0763d42d1cae9f7bdfa1a75f33760567eac5ebd3b9e13d9eb0bc5ce75e361c000015c163f5c06900177b48577a7a080000000000000000000412000003c629a2e5e9a0000fa37bf4417bc77e9f2e0e9f0f04bdba24bdb323ac4b3ba8e3cef7aab33d38bb0c3f308283b24fdb780db4cd1811f3f47755b193df322d611603a1bd0005b9ec5eba6c5800002b82c7eb80d2002ef690aef4f41000000000000000000000008240078c5345cbd340001f46f7e882f7cef53e5c1d3e1e097b74497b664751f6e18e9457befbc3f7863391d719a5b72f4b77a4659a21bdf5b669283683b566bf7caabc4ee035e4a8705b9ec5eba6c5800002b82c7eb80d2002ef690aef4f41000000000000000000000000001e314d172f4d00007d4bdca4fbbb39d3c5c3d2a9e577b74497b6647e75e8b51e587f98d580d8dd7205d5d2a58e9bc3a53bad8f1444f4ef31372f652a837a8b14d79d86d782a2016e7b17ae9b1600000ae0b1fae034800bbda42bbd3d040000000000000000000209000001e314d176749801b65946defb39af7b08e918ed1eed5ea38bdba24bdb323a8fb70a8f35c400338c1c5e6e634a96707a7e9fef1722b5f65f64435e3617574aa505b9ec5f837bc800002b82c7eb80d2002ef690aef4f41022400000000000008240000000001f9531dd0f9e1488d92f0c3dd7d234e86d7f80e1c3e43eb8f91b21e0c3613c3fe58f90fae3e43eb8f90fae3e47e9f4c67deafad436a7e2eb80cfbcc7e87ec7c2cebd0ec98f49fa4000002b82c7eb80d2002ef690aef4f4100000000000000000000004480000827f1fd875dd81d776075dd883f06bc713625aede827a43b03aeec0ebbb03aeec0ebbb03aeec0ebcfee22400000015c163f5c06900177b48577a7a080000000000000000044c12000000000000071e5c4a0deaf6baa37b344f7b0b12000000000000000000ae0b1fae034800bbda42bbd3d040000000011200010240000000001120044800038f2e2506f57b5d51bd9a27bd858900000000000000000057058fd701a4005ded215de9e82000000000000000000022400412000000001c79712837abdaea8decd13dec2c48000000000000000002b82c7eb80d2002ef690aef4f41000000000000042400000000000000000038f2e2506f57b5d51bd9a27bd85890000000000007c4fb75206f0fe152c2da552c2daa6a505b569a6b000177b48577a7a080000000000000000000412000000000001c79712837abdaea8decd13dec2c48000000000002906efa908f3e00000002ef690aef4f41000000000000000000000022400000000038f2e2506f57b5d51bd9a27bd8589000000000000521dde5221e780000007da3e9dddf907ba8000000000890000409000209448000448000000038f2e2506f57b5d51bd9a27bd85890000000000005235dcd239e7200001fa1fb5abe25b9400000000000000000000000022411200000000e3cb8941bd5ed7546f6689ef6162400000000000149176f49079c00001603845981ce40000000000000000000044844822400000000001c79712837abdaea8dbfd401738a631738a631738a631738a631738a631738a631738a631738a63173953d8200006cde316e676fb80000000000000000000000000000000000000e3ca0a10e8ee86ae988b2a18ab2a18ab2a18ab2a18ab2a18ab2a18ab2a18ab2a18ab2a18ab2a18ab2a18afa8fdbb4d3ebe5c0000000022609000000000000008240890000000000000e3c871721c5c871721c5c8714c9c5c871721c5c871721c5c87172112824000000000000000000000002260901120002240000000000000000000000000000000000000000000000000020902240000000000000000000000000000000000000000000000000000040900000000004482241024044802260900000000000000824000000000000000000000000000000000000089000000000000000000000000044800000000000000000100900000112089000004480000000000000000000000000000000000000000000000000002242244482240000000000000000000000000000000000000000000000000044800824000000112044800000000000000000824000000000000000000002240040900000000000089000000000000000000000000000000000000000000000002012080980026012100980480112080480002012000080904482026026024002024000080484024002024007fffc40031100000040305060701000301000000000000050607020408031015163701141835365012172030313440111332a060ffda0008010100010502ff0090a7e2a31566ea58972b48e2ceeb319dd6633bacc677598ceeb319dd6633bacc677598ceeb319dd6633bacc677598ceeb319dd6633bacc677598ceeb319dd6633bacc677598ceeb319dd6633bacc677598ceeb319dd6633bacc677598ceeb319dd661b1a8a5da20de526ac27e53b66df8308e3b49fec0d5c715a363db22f89efb9758cacccc8c24d061268309341849a0c24d061268309341849a0c24d061268309341849a0c24d061268309341849a0c24d061268309341849a0c24d061268309341849a0c24d05b4b4c4b6dbda7d2ded917c4f7dcba89e565668df092b184958c24ac612563092b184958c24ac612563092b184958c24ac612563092b184958c24ac612563092b184958c24ac612563092b184958c24ac612563092b15a92b2d2aa5bda7d2ded917c4efdcba87b9bfe9adcea5bda7d2ded917c4f7dcba87f9bfe9adcea6bda7d2ded9b7e26d9775629af255d71e4abae290d0eae4899fe9adcea6bda7d2dffc556e752ded3e96f65583a48241c333586d25845c6635038cc6a07198d40e32da81c6635038cb6a07198d40e331a81c6635038cb6a07198d40e331a81c65b5038cb6a07196d40e32da81c6635038cb6a07196d40e32da81c6635038cb6a07196d40b0ac6696d62473c6dbaee2f6ab73a9af69b4b7b2546d414683b230319e359afd32d3333276d4dd51334776decd6e752ded3e96f63501bd89011a80ee794a77e893b0dea6e568a6c26257822960e7a2bcbb5d04d51aa88dcb6c6888b3f92b44c8a8209da2548c7b4fa8a5416166b5695c06ff006fa25e5e626ad9274c0ecaa2c8aa892c7fc16345cddc1018d1423ad2cd53464b32eb35524148893412d33312530dc2a615a21bd8adcea5bda6d2dec6fc4ddac9341e927e6c5bcb854eeb984874a7a27cbe44d256a4187b26e666e6a9a3523ae6eda32e8b6c643d3522a2daa2786ea5ab58ad594f62b73a96f69f4b7b1d42e8dfa49f9b16f2e153bae6121d282a5dc75e923a25ef03a459694f751f34bc330bb4cca2c1233f27685f3c854818aed568543903789d0e23b28b6c64959596b29fb5b4a9a7a2d2d642adde095d89aad4b38e58ce7ed8d0caea54d12f62b73a9af69f4b7b1d4268d7a49f9b16f2e153bae6121d2a2aaf594333b66a174c6d0e3eebe60d1921ec6c0a0392b6936f118ac559cad0f7d74a9a25ec56e752ded3696f63a85d1bf493f362de5c2a775cc243a50555eb2d8585b4cdb532b0472567615e7d26984c98ce5a189831a55013b482b68fe3b22bba4292dd43192e0f9d91c1f3b21714e4e0b7e9bba95344bd8adcea5bda6d2dec750ba37e927e6c5bcb454eeb984874a03249a64e2d641329d2aba28a1876553be120a4d8109b2ca1440ad9b3b5855b725fa6eeaa8d0dba95744bd8adcea5bda6d2dec7509a35e925876c6725db3f85e2a5ed60b77bc243a501e3aedd264d6ddfd67a5c292af9b02985cba965f38167732a6d01d3502b49336d3e91b8b6b35605a5f4fefb1d3c13e2aa3436ea54d12f62b73a96f69f4b7b1d42e8dfa5ad209953387b21d90ec0f74f5918bb0121d282aaf597d3468b9969a220a84e96ab53ee8360a06bd45750f73a1551a1d752ae897b15b9d4b7b4fa5bd8ea1746ef6b6986d5cd4159d12aaf6db33f4f49869e602ed4d288d48184dc6613e121d282aaf597d2de2d8c9bc57219684abf4e05324d3cb12c54d1590cdda6da285878d86622dd9e8c5546875d4aba27ec56e752ded3e96f63784ab69d3617d3f95c652d0dd3b3d265b2b524fccb3876b7243a54555eb2fa9b07654ed51b37b504dd38365b36ecdbb2fdbb766cd9550a64ff009457535485a17331ec56e7535ed3e96f63b4821b581e86de71b45c5c92aa8749265f615b2add9099d68b8b3166b4765c05fda5f21552ee96c9716ef20592c4f1787deb8238ece24ebd8e9a5f64ad623b92fb36d6a3a1e19eac077a6e150bd8ea2a21b6b7b799b40dda14d1c55514964a13167b15b9d4b7b4da5bd91c66e136e6902fa97dcb48cd5ba594d2b16007a3003d1801e8c00f46007a3003d1801e8c00f46007a3003d1801e8c00f46007a3003d1801e8c00f46007a3003d1801e8c00f46007a3003d1801e8b24ca92de244537ba2b2996a1a24db524decd6e752ded3e96f66db616310dd65c6eb2e375961bacb0dd6586eb2e375961bacb8dd65c6eb2e375971bacb8dd65c6eb2e375971bacb8dd65c6eb2c375971bacb0dd65c6eb2e375971b25ec21f72b73a9af69b4b7b6c7558cbd9c7c5832838b0650201dd4339b6dfa6b73a9af69f4b7b645f13bf72ea1ee6ff00a6b73a9af69f4b7b645f13df72ea1ee6ff00a6b73a96f69f4b7b645f13bf72ea1ee6ff00a6b73a96f69b4b7b645f13bf72ea1ee6ff00a6b73a96f69f4b7b645f13df72ea1ee6ff00a6b73a96f69b4b7b645f13df72ea1ee6ff00a6b73a9af69f4b7b645f13df72ea1ee6ff0084f1404a992f98aab666c2d78b166c7162cd0e2c59a1c58b3438b06687160cd0a9b73526e61dded3e96f6c8be27bee5d43dcdff0d4c3806aad723db69b4b7b645feb3df72ea1ee6ff85d6d4bf6da7d2ded917c4efdcba87b9bfe1763533db69f4b7b645f13df72ea1ee6ff0085d9d4df69168f3a5d2888caac48897b645f13bf72ea1ee6ff0085dad4ef648084d54c6ec833258d39076d8be27bee5d43dcdff0bb9a9dec4acacccf4cd3db132ada16f6e8be277ee5d43dcdff000bbba9febb3b38ed63a6761a14a4976f8be27bee5d43dcdff0bbfaa1eba67a7cd9b36f708be277ee5d43dcdff0bc1aa3eaa6d602d5596f0c10d9c3dc22f89dfb97525ae9268733f3f99e1e7f33c3cfe67879fccf0f3f99e1e7f33c3cfe67879fccf0f3f99e1e7f33c3cfe67879fccf0f3f99e1e7f33c3cfe67879fccf0f3f99e0e619c89cb81e9a7963a61ca389393952e95ee317c4f7dcfd2c8b306ceb9f131296a78afb96df831823b230fd0d435e74ea295188c2341a7bba3ed4d8ac945346815cd9c59116e3222dc6445b8c88b719116e3222dc6445b8c88b719116e3222dc6445b8c88b719116e3222dc6445b8c88b719116e3222dc6445b8c88b719116e3222dc225827316860da37448d9a6bbb7f360f0c23c308f0c23c308f0c23c3b078611e1d83c308fe6c1e18478611fc8478611fc847f211e1847f211e18478611e18478767fcd67fffc400141101000000000000000000000000000000a0ffda0008010301013f01481fffc400141101000000000000000000000000000000a0ffda0008010201013f01481fffc400561000000402020a0a0d0a0209050000000001020304000506111012313536749394b1d11320215051737592b2b3142230323340416171819195d315233442526272a1b4c124a2071625436382a0c2d2266064e1f0ffda0008010100063f02ff004853ba33446667652f66b8a5b223b87584bb8235f05716c6a5d33ddffce535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c6174cf3f535c27f2a4d9598cbce70ec86ee4d6c36bc251f20c24f9a9ed9359303a66e1288561bdcb28a1ab132a6ac47d3bc3475450d589a46d04447cbf325dee578c1d366a6edcea5576d082317b5c64462f6b8c88c5ed719118bdae322317b5c64462f6b8c88c5ed719118bdae322317b5c64462f6b8c88c5ed719118bdae322317b5c64462f6b8c88c5ed719118bdae322317b5c64462f6b8c88c5ed719118bdae322317b5c64462f6b8c88c5ed719118bdae322317b5c64462a72dce9d7700e5ab6946f909a7525dee578c1d3667e0e5ba6a54dd0aadc80356e9e2f6b7c8845ed6f9108bdadf22117b5be4422f6b7c8845ed6f9108bdadf22117b5be4422f6b7c8845ed6f9108bdadf22117b5be4422f6b7c8845ed6f9108bdadf22117b5be4422f6b7c8845ed6f9108bdadf22117b5be4422f6b7c8845ed6f9108bdadf22117b5be4422f6b7c8844981b372275b456bb420057db176946f909a7525dee578c1d3669062edf49fc6a4989abd22ed28df2134ea4bbdcaf183a6cd20c5dbe93f8d4931357a45da51be4169d4977b9431681cc6a138d5f31180531c846014c72113b569351e72c8ab2088242b92ab6a84f5f8d4931357a45da51be4269d497fecb92626af48bb4a37c84d3a92ef37fd5149116e7ab7110ace7e6940462d5324d16fbc9b42d5f99822f7ce7354fe245ef9ce689fc48bdf39cd53f8917be739aa7f122f7ce7354fe245ef9ce6a9fc48bdf39cd13f8917be739a27f122f7ce7344fe245ef9ce6a9fc48bdf39cd13f8917be739a27f122f7ce7354fe245ef9ce6a9fc48bdf39cd53f8917be739aa7f122f7ce7354fe245ef9ce6a9fc48bdf39cd53f8917be739aa7f122f7ce7344fe245ef9ce6a9fc48bdf39cd53f8916a7426c9fde3b42fec7180428e5274545843c02a514cfec30057eaee724c4d5e9176946f905a7525de5350fa22b13e55549fc42d77b14a21e4fbd067b3276a2ea9c6b328a9eb11f1a2b868b99350bde9c835084254069cbb299c6e165ef4db82a7dc379f807b94931357a45da51be4269d497791dce9c0f68d5b9d537a82b8773f992a275de2e6554111f288d7b549b5756c8a14bed184d735353809c8061004384230dcf9bc3fa1dd99d91d8624f9eaaab6b64ca7ff758426730a58cd12ae994e5226431840042be080ec9a70bd7e5b46c11fc652e999cdf70a994340c56c2984c13f328990daa055a3b4adb2e21fddb9209447d77204d49e8d2e8a56d50392d474c7fcc5ac36a56cd503a8738d452265ac47d50572ac8fe4f44d70efce041e6f7df94146774d8c0a55db03542b0fe68a959ecd0e3c36e4d51fd994ae6091bfc5290c1a2366a2f386d30ff0004e3b19ff3dcfce064d4a652768e402bd8ce203b9c3586e5823a6ab19355330188720d4251e1896526face9a10caf98f576df9d7dc64989abd22ed28df20b4ea4bbc93f591ba32f31777cfb9fbed9ae304e9421c4974589efe26ff00a74ac4b7114ba21b53b198b44d74540a8e9a85ac06094aa8cd7f253b5ad4c8887d18f76aafec8eed9161270049ba55764bc50bdaa7ac7cd044a54c8177757cebe5c81b2187cdc01e6db4dd421eb49aaa0d920e0b428147f9abb32a13790eb07b15377192626af48bb4a37c84d3a92ef24fb13fdc36cd718274a10e24ba2c4f7f137fd3a5625b88a5d10b0ee4b25a633266d488a76a8b47a74c02b0fba31b236fe9066fb835daa93050e1ec118fea7d341488f853ada392f6bb3885d28870f97db61fd1d76914c570dcc05b70b86ba03ed85982ddfa2a99337a406a86745e58988a8e95a8c21f50974c6f5000c254728fb3049226ea86f2aa7f298c3e51b00e692ccc0153f81668f6caa9eae0f38c289d139520c12fee8eb141453d235ee46ca34bcde82b74eaf65500573306ae2af29da102bf6040a14ba8b98aa5a8d4b3135615fa061c4cd7efdc2e654fe930d76659c6afd69bb8c931357a45da51be4269d4977927d89fee1b66b8c13a5087125d1627bf89bfe9d2b12ec492e88587dc4a5d1b1221641f39f2813d9e5fcabb1bb13cec2f05f2bb9d8fd1b21a1e53d748fceae716ed4c25b840efbf3b0f695bc0b6ec74fe693afbf5046a287b4617a413d742aaeb9ab1ac7bd0e00ee12ce357eb4ddc64989abd22ed28df20b4ea4bbc93ec4ff70db35c609d2843892e8b13dfc4dff4e95896e2297442c3ee212e8c15bb748ca1ce3510840ac4c305a7d4da56a3616e5fece6cb76a6b71fae25bbb81c3c361f4fdf2a044db3731c4446addf207b617982bdf2eb19437a446b890352a5696f2d4d53079ce16c3a6c49a8c26aee2eb1dc28501fb216a15f386ca4f91232022c981cb6ce42e0c5c639d045c639d042f4aa7a56bd8adc480a6c4b808f6c60286e7a442ccb38d5fad377192626af48bb4a37c82d3a92ef24fb13fdc36cd718274a1bf125d1627bf89bfe9d2b12dc452e885815e6b2066e4e374eb372987f380f93646d50aae6c48142ab16c61a80203fa3ca2ce3646e8ad6ef9d10db8a182e103cc177d9624e08f79f262169e8d8c2c49d4377a6627b5e70596189a7d10b338fc6dbf509d99671ae3ad377192626af48bb4a37c82d3a92ef24fb13fdc36cd085ba2e53e9042003e444ba2c4f4e90ee6c8887ac104c2c4b7114ba2160f249fd2d66d1d10004e92ead4215c76f4f980fe056db441c925eca98a85ef763484851f59a1595b75c25b2f3dd6cdae9c3ef1aed9903c20d754b1248ff008885b51d1625d4a10444c0c1d0a6b183ea9140bbce000f5d9465e144a5a604122900d6ca6ed41570c4c9a4da4ad5a0324933905b98ddb5b08ddafd16271f8db7ea13b32ce35c75a6ee324c4d5e9176946f909a7525de49f627fb86da4f276a4ac547e998d505c2146d8c3ec018b50f2589ebb44f6c517c2158798003f6b12dc452e88587dc425d1db3aa04e14a976c7170dc07eb106efe75587746e6c9db37769090e1a07d4350faa1494cd9b08a2235b5745ef1527a6cd20c550e91ec4e3f1b6fd4276659c6b8eb4ddc64989abd22ed28df2134ea4bbc93ec4ff70da129627497b096557395248e85b94c528d5c21545a9e98b2027dbd80da2b834dc8f147f323a769d94a96d4085f2da97c95faec4c292bd3d446adc47d261dc287b442167eaf7cb2a638fac6bb12dc452e88587dc425d1db34a572ddd3373fce26371420ee0947d508525912f6e92bb862f9533f94a3e7b06945259526edb9bea1fc9e81ba10a2f44694aed2d8d595076982850f356150e98b5feb631b5fb5b11a1f3c7b480af167c990a622685a9496a23e5af76ed89c7e36dfa84eccb38d5fad377192626af48bb4a37c84d3a92ef24f25a525b19497296801c201586d2488aa9da8a8cc15abf16ed93bd983a222926159d454d50004168a513707195207b659512daf641c2e7f97d3665d8925d10b0fb884ba3b7ece91af6e81cdfc4b338f68affefcf09a4de6a0cde9bbe64f3b51afcc37062b0da563132927cb2dc5dae743626e55404e6a96208ee7a006cc9d25496bb210ea87a0c713069ee324c4d5e9176946f909a7525de414ce158182a10875293226ec351515182821b864c46b00f55cf5594252433078d9ba409a49ba6bde9402a00ac8258fe26894b847ee09c3fdd1b1cb647296ff007c5250c21fcf5409a935225554fc8dd3ed130ff286d1297b59833d8d14c084b66603b8117c5966410a524a42b10ee95000399325a86e79bb802899c4a2170406e414b28a68ec084ef5358c0a97d87ae001424a96abcaab336ef34e1157c8321af87b196f8b16a81a5adbef22cc6bfe630c1939c53576621aea6888241fc8011b2b858c730dd31cd58d86d4665603f3a7f9d56aac122794d0de4ec13b541b2254922f014a15077192626af48bb4a37c82d3a92ef29e45485a80f95bb82876e89fed00c1cf29949e6ccee95765ba60f493befca2d1c51d7c98f01d99c3f68bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8bc8ef3636a8b4468fbd38f015a9c7f684f64902b2e686dd33b7e16950798a3db0fb23b0a529ec8e95dd76f4c1db283c1e60f377292626af48bb4a37c84d3a92ef3f6c8947d211e009cd8f004e6c7d1c9cd08fa3939a11f47273423c0139b1f47273423c0139b1e009cd8f004e6c78027363c0139b1e009cd8f004e6c78027363c0139b1e009cd8fa3939a11e009cd8fa3939a11e009cd8f004e6c780273637112737ba4931357a45da51be4169d4977b8533d215eb28d43fc02bff18c225fddeaff00c630897f77abff001872de884c945ccd0a532d6edce4aadababbe0f378d4931357a45da51be4269d4977b95e3074d9a418bb7d27f1a92626af48bb4a37c84d3a92ef72bc60e9b3483176fa4fe3524c4d5e9176946f909a7525dee578c1d3669062edf49fc6a4989abd22ed28df20b4ea4bbdcaf183a6cd20c5dbe93f8d4931357a45da51be4269d4977b95e3074d9a418bb7d27f1a92626af48bb4a37c82d3a92ef72bc60e9b3483176fa4fe3524c4d5e9176946f909a7525dee578c1d3669062edf49fc48d359f4cd26adc975454dff00d5c0a649faea807d74d99ea1f6d517ddd666317ddd66668beeeb33345f873999a2fc39cd0d17e1ce666896bca28e945536cdce45454484bba221b4a37c84d3a92ef72bc60e9b3483176fa4fe24f650771532961fb1d044a3b822174c3e7aebf60774a37c82d3a92ef72bc60e9b3483176fa4fe253ee565fa63dd28df2134ea4bbdbea8578c1d3669062edf49fc4a7dcaabf4c7ba51be4269d4977b95e3074d9a418bb7d27f129f72b2fd31ee6de8e489b1945963d42201b840fb43c010d248dfc1b36c4449e829403f6dee578c1d3669062edf49fc4a7dcaab74c7b92122923432ce5c1ed124cb168a5aaf3373db3c7357f217cc1bdeaf183a6cd20c5dbe93f894fb9516e90f7123466dceaaaa980a9a6996b130f000404fe7adca79d384ea308eef63947ea879f8477c15e3074d9a418bb7d27f129f72a2dd2ee009a6511308d400104a734b1a14662b856d10397e8e4e1fc43be2af183a6cd20c5dbe93f894fb9515e977047fa44a6ec3eadb4b592a5f62860d01e7df2578c1d3669062edf49fc4a7dca8af4b6e953ba5ad6d65891eb6adce1bae4c0377f0d7ed80210a000170037c95e3074d99cab4aa768b22b8411044cb1aab6101357a630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f5865630f586562713696ae0aa0e1fa874942fd6288dddb7cb73c44c593b4386c83736737d80fde1362c5b952452201124c81b8500f26f9abc60e9f1a013945295b6380bd71c21f60be718464d2768541b3725aa4910370037d174942d462aa6010f5f8c964b2c012229d4678e44371226be086f46a40dad1040955b0f7ca1bca630f08efabaa514225067cc9dac2a9d06fbaa24636e8f6b7442be08121e864d4042e87c9ea6a8c0e9afbbd4d5181d35f77a9aa303a6beef53546074d7ddea6a8c0e9afbbd4d5181d35f77a9aa303a6beef53546074d7ddea6a8c0e9afbbd4d5181d35f77a9aa303a6beef53546074d7ddea6a8c0e9afbbd4d5181d35f77a9aa303a6beef53546074d7ddea6a8c0e9afbbd4d5181d35f77a9aa303a6beef53546074d7ddea6a8c0e9afbbd4d5181d35f77a9aa11413a34e59b639be71e3d4853290bc3bbba3ea84e8fc9d22db77ce17b5ed953f08efbdc8b811722e045c08b8117022e45c08b811722e045c8b91722e45c8b91722e45c8b91703fd359ffc4002b100100010105070403010100000000000001110021314151f0102040506171c13091a1f16081d1b170ffda0008010100013f21e10bb89c78a6ee5addea63c6feb9a61c5c1ff1b2ed987e0727ab3d39b1772f8383bf9fb76fb77af8ee63b70dc2edec7d42ee5f07a587ab07a907e06ddc81bbd2c7663b73f4f0ddbeb1ac36177a386cc3641be5db20d91cee4e12de7edde8e1bf0728936dfb926c9364952561eb49e94952549cb6ee78dd481173cf975f185022c89a4920a578ea850a142850a142850a142850a142850a142850a142850a14284364a4c2e52d9e24db038c9d28e09938527ec4e5b7fd9a77ae956aab90b7c7496a6577dbb935ef66b47cdb56705111de0ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e287b0128a7dce1f6c9c55ef66b47cdb73109609e24b2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad23e2b40f8ad23e2b48f8ad23e2b48f8ad23e2b48f8ad03e2b48f8ad23e2b48f8a09338ccaf182de336c1c2def66b43cdf870361b6f7b35a3e6fc3b1c08b7fd9a4b24d0a225afb77f6beddfdab7efaff005433893dfd2838c81b5bb7cbb720e558f3261b6edeb45e481bfa07740a7e786e65efbe38848a366cd9b142851b1428d9b366cd9b366c51b360f32e2a1ee3e2a7706fd48483f6e69012a2fc452f308ba6224c84cc3534fa218f578a52bb29a3a253b21d9c47986e811360cb6b272061b64f464f42f866393f854f5cb65aa074260323773549ca027e68fe86181063e6bead400d9f1592eac22c7eb60c23b7184a826dad788716af41af8c765be6a0168c7cf70a5aba408bd00cbbc1d68b13ec76b405c947a6ecec58d7e40b57b51048f3e4cedc7f629d0368b171860c7eaac2476c4f82b60af9abd8255818cc83a50b3de286a66de9dc154751d88706682c812e468d2d94c6081fa3cc4c12c485b3c045fee16f6b792b4fcbbf2a14cdcec66800e7c91a2c121caa88cc021369116ced93969a4dc20bcc24772af80d31443733a0617adfbd6e8462cf9743fded5eeebec03e0e62c36fc8ef5ade4ad3f2ef4a84927472a5580be822b7865eab1f6a1914c002591011b105b1b101eda50cbd5c8066b09f6734be4a3df8c081464296e5442a6084c02f448096e00b8360f42b875016cec0eb4ac6c82032253e911de82048dc5ec46b119e59dd15472a42a4189722d8b9a6455d1ceaf97959f81b4bbd1f99deb5bc95afe5f4257a7ae7200ea936082765b5754c22eb9474ca83537c240a1ea02cc9cf61f6843c22bda8bd05c29aa4512303280b39c9f6097e477ad6f2569f977e542e8359daa8c0016ab9153c3c995b1550090084b28636012b8d7112364a80ead7ca76ad7cb4689743fb3d567b16497cd428194c1388e5b4aea2cb82498e9b6cb25ab641d8ac5fe8e5e7d825b777e477ad6f256a7977a54206c40928bad0d4e9bbf77b20d88c00b55baa03587131215e8a9c52174ecbb8df18fc6c98789b38937fa73af9029b04bf33bd1c122066b4216b429faec9ee0fdb27c8ee4220721082499ccad61ce8684c960a9f60b3f5563c2ecb955b7d41072a59d869534321f33d9836060805d1eec33daa770a4820a63b29048c228292b742ecf9b4036c36fc8ef4dfedd240fe83a8984000d80842dac667e57a50ba450b4ac5847a8ac64f4d99e86d8b91ea01d4535eb99286c4c09723689ce5a20a6c36fc8ee5895d1140a2259ceebaba19733a3ad34e446a51025b8255516082cd0c42f9705fb84fdd67f8de2cbfdf4a17511edca40984cd31930e142dc76a90042c04fb238ecbebd22cacc113a894d16416eb76080ba659e7438bf717b4f9a66aa60ab21265d070c83fb0db270ffbf452da055aff00b00dc9ae27d166fec476bf4b9d389556ca11555724881b61790158608f53d752c232dc45969842e84945bf4191c6e5c7b0865caa75c89623b922c02f56ea00add6b1a82a0227a6d7908438aa7ec0f3181b465a882f1b228aead5a1a45ca19755b57dcba918093018cd46e377953d95fed2158e1dba4db771a4231b8922e841fdcbb84646ab4504ab6d856bff003443950c02001759e83b2b95856645d581b1d865058a80be8407bbfc114b8b3be2d5fa76e587b5f8abda9214ca2c34c2f7c49fb6dd8364946e42d3a04b5d1e55601ec1c8982593805684232c567fa8b92c6812198626525aec8eb4b476f51f3c4356ad5ab56ad5ab56ad5ab56ad5ab56ad5ab56ad520571e7b147e8ca11b0bc49944334a895381f2dd0e02cbdbde58c36fefd17e52cc5afa7ff2be9ffcad4de2b5378ad4de2be9ff00cad4de2be9ff00cafa7ff2be9ffcafa7ff002be9ff00cafa7ff2be9ffcafa7ff002be9ff00cafa7ff2b5378afa7ff2b5378afa7ff2be9ffcafa7ff002989339868239a404adde82c12d4da260bf18da142878a4c6d084137aee6f036c9c25ef66b43cdce81c0daddc25ef66b47cdcb81b0db8ef7efd7bf70bb7ef7b35a1e6fc381b04b7bd9ad0f37e1c0d86dbdecd68f9b9a0360964df8374bbd6bdecd68f9bf0e07036def66b47cdc283396b31e760bd7425a7ec9fe2115f1bfec102973cafa7022640df60f31db7bd9ad1f370a0dc9c978b64936b62720c39c9dbced5a3e6e14198e4ff6dc782bdeead0f370a0ec72be36dfeb5ef66b47cdc28331e9e0085481936ae05eb4d2ca7c4599f81eb61c7def66b43cdc783284f1e05eb7ae405ab8054a6281c62cb310f995720e0e0e2af7b35a3e6e141d8f46a75c111f6005aab815603269622bdd2b83a830b3c541506f41eadef66b43cdc283d3b3fa01fd434aadc51803ce16b9cf73a118ddc860f5af7b35a3e6e14188d4daf4268ea1d00b0a97d97965e8b0a0820391dfeadef66b43cdc283d3736ff7dc0e441b888ec4bada2ac500800c38d6ed927057bd9ad0f36d8ede823707687bf0442108421084210842108466677588a0de36d71861b336516a2e1332a2b9210280191c860e06f7b35a3e6e298c36d8659730849b89968e044802e677fd9a740c960884e245215aa26feaa10630e5506385fe8112d70b60020f570e4edd4d33f2932326d062d41175254a44b34e1e7cf9f3e7cf9f3e7cf9f3e7cf9f3e7cf9f3e7cfc1756419b611e801569f02c4398a4bd0b81b8f5b0e1efe0a7b61ed5f415d0fb57d057d057d057d35743ed5f4d5f415d27b57d05743ed5d2fb5743ed5d2fb574bed5d0fb574bed5d0fb5743ed5d0fb57d3500101c89bb8fcfd7c390e1e949f82b76db7f0ec7f0b6efc2e0f5dbb6c9e961f8374ac76c9baddc241ccefe770735b38a93d1c76c9bf77fc55bb617561b6fff0090dfce5bb7a0dd83d56ee26ee43fbe0b1ff876545db5bb66758d176c2b1d8dd58ecca9bb70bb6b7563bf8d376fe7b5bb6e3b0bb6176f63e817567b0ba9bb7b3dcfffda000c0301000200030000001000000000000000080000000000010000040010000000000000001000000c00000000000000000000000000000000000001000000000000000000003000000000000000000000000000000000000000000000000010000001040c00000000000000010000000000000020000000040000000000000000000000000000000000000080001000000000402002050040001000800001000c00000000000000400000010400800000010000c20800000412400000820000000000000000000000000000000000000000000002000800000400083c000000000000000000000000000010020220830800000000020000000c30000000000000000000408000000000000000000000434000008000000000000000000000000000028100000000000200004010014000000000000030000800000000000000028500000000000000000014014000000000000000000000000000000000030c00000010100000000014014000010000020030000000000800010430c30c30c30c30c20a0800001401400000000000000c00000080000000001cd10c1810040040042800001401400000000000000000000400000000003c500520420100030028000014014000000000000000000000004000000038500118730400e20028000014014000000000000000000000000000000034100410410108d04008000014014000000000000000000004000000200e00800000000100014028000014014010000000000000100000000000508410000000000400c00700000014014000000000000000000000020000100c00418d30c30820c3080000001401400000000000000000050000000000000002850000000000000000001401400000000020000c00000000002002000002850000000000000000001401400000000000000000000800400000000002850000000000000000001401400000000000003000000000000000000002850000000000000403081001000000000000000000000400000000000002850000000000001000000001400000000000000000000001000000000002850000000000001400000010000000000040000c00010800020000000002850000000000000000000480000000000000000000000001020000000002850000000000000400001800000000000000000000041020000000000002800043080000080000072000000000000000000000000000000000000010830c30c30c30c30c31480000000050000000000000010040000000000001000041060083040040400000000000000000000000050020001000000000000000000000000000000000000000000000000000401000000000000000000000000000000000000000000000000000000c00000000002040c00801400000000000000400000000000000000000000000000000000001000000000000000000000000020000000000000000003c00000081000002000000000000000000000000000000000000000000000000000041081000000000000000000000000000000000000000000000000000800400000002020000000000000000010000000000000000000001000c00000000000040000000000000000000000000000000000000000000000072071cf0083c72002072000072000070081c71c000700000720f0001c000ffc400141101000000000000000000000000000000a0ffda0008010301013f10481fffc400141101000000000000000000000000000000a0ffda0008010201013f10481fffc4002b1000000307030402030101000000000000000111102130315061c1204041516071817091b1f0f1e1d1ffda0008010100013f10da4adce3ba9d4d9d131debfa6a98eeed7c372998f61de8aaebab4aa7dad9b895f9dae747c7462dc744ad58c4954fb50b18b6a25aec39d409d0b1662de7c21e3a5c4188c592a0e2cc596b5ca65a62fa956ef6cbe959eb5f9d071d76a9179ae268bccbccbc2f0c635e85785e17a9ae2570c8e318cc1c4000001d24e88df3468d1a3468d1a3468d1a3468d1a3468d1a3468d1a3468d1a34118107e7555260ec04a12da1d94d0003bd312a808c28067415e897d500d73a94e4873b08588637552a54a952a54a952a54a952a54a952a54a952a54a953d73202cdb862f6f9c915866c6401baa952a54a952a54a952a54a952254a952a54a912a54a928b88803780316be3377061a0c39238f9c8aa4897cd91068a14105400e4021416b79f0c4ed72b45aa56352d061c4d486f5589040013a3cdcd080cc053214c983060c983064c993214c993260c9926394a1360a5bf354103e127f9bcff00800000003780dec614f745e699eb1e060aeea42000005ea068317a0de8085604003a165be5c0d7c0041695ac09007475904006234ae1da3018210902f100ea1c01e495b9e9858508011c8178040c0045ac21a83ecc83620169d378d43b005b243ac00b1001e1ab81272079072f603eb03820c1c99048020758435a000982743418600400eb421411151106825306d6e408c0e5c708044694105a607d85e0e010040d035d77a3b2394004f7487b245a9000c30550a68131f23afa80341860e5c70801c8e2c1013318453450c92864f6000c4002d9bc850200213040004e26adc644372807017172e9901000007e7099404c01d0ef6a080005c13016049848e16b8032049ac85a0018e59453330feca59cf86256e003971c2c18ad66241154a40496b5600bd62d05101f8bc664040003d611971076380e682481cb8e10009fde33a0380091fa59860800040922224370be8040716210002169139b8007b311d253560b420084411091ec0d92432d29e45680439a097aec903911c20119c419003fc83c040c5538138883d2dd4820100180101d2bf41c18fe051276084a021d682400402c04e13280b65f0d340aa029056a28402d12200083a0014e19317ce1009142b0f43d0b010f0fa79ee0017600469040400445562940408f1a0c209deb15c17f000b35e04131604d20c84010002efb44fe84941ac18920000f8274ebb0020084e1d683080ad7a127c10000d90c02222903100001de9e3002117b9fdc240800166ffc200810000faaa40d050300f1e015803001e12e8103eaa024100a959c003f65d1640c86d91c3cd062f6ddfd31677d088296e39ba83600a57486001615550000001600329250a9a0001ee3af1b8c80823915c5023d072220a80404e5a8bd1e440212a88196e000f86156c528882b43972bc84100edba8b200807b08ceac07234cad00000e09c294311e509c9e823a250241800f86980a0e410805f204db0010f610907f000327a45d200020945a4d31d4490c555b183cf67de2344cdd002809f6561cc050868257b605a92464e4997e4402fb210031803aab048bd6e0f1e3c78f1e3c78f1e3c78f1e3c78f1e3c78f1e3c164782014b44817c1c8688c00b18e8f40e990034187f4d065810b1608102160858b162c58b162c58b042c10b162d62448102553e129d008338817d0509a4506a2447c6296081570df0c5eecf77061f0c4eec372461a0c63a94a3dc4d12be5a77061a093b830d061c91868257b5dad32bbcdc9187c30e48c0cdd1fd5402004a500bb382000a28382a21a410202061c91874a8816439f90801f6762348c127470318d209c1811152e0c3894472460838616429e522083c0e5a50d3818c31aabb83076178f1a1c1fb800005b4c3147997507ed002d541c918110c18b1318f92001d41e1071240871d037601685ad56a86ee0c1c2e00f00178440a87be4b00010b5447246064020705ff62200300004b8e54371294ee0c003ef4ae20800002b4af8e0085bd9ccbd48770e711900010841ce73a108421083a105a0d18f30016a28ee56101640003c351016802836a9ae49289d9010047817c23439bd4caa3a6f30b3720075e53669c57e9003028b94717ee0078004531a3ce044f193d200802a01d64236436e6ad5ab56ad5ab56ad5ab56ad5ab56ad5ab56ad5d5099d8241800092406c847e8000f8d8eddc4d919851da8461084fe658cfe66313e4641908320c633f991264a14edff003e11f1a0e30af762ce6faf6763d973bb2ed479cdbd0b1ec677d462dbda676d2d54dc4addaaafaeeaf41c5b7b5b89f0ace64a18b5c4f885c4acced56b4da8b3b72e25054b65c7e0ee7c04a6ce673e03112993fa18b270c59cf809da253670c75e2276be7c1b39b8b253256ac604a1cf832509dab9f0d1ffd9`

func TestFile(t *testing.T) {
	data, err := hex.DecodeString(str)
	if err != nil {
		t.Error(err)
		return
	}
	f := bytes.NewReader(data)

	svc, err := NewFileStorage("./uploads", true, true)
	if err != nil {
		t.Error(err)
		return
	}

	ctx := context.TODO()
	o, err := svc.WriteChunk(ctx, "d1f187cc-c4c9-465f-9bc7-e20f65ac2c24", 0, f)
	if err != nil {
		t.Error(err)
		return
	}
	t.Log(o)

	if o != 14991 {
		t.Error("Whoops bytes written is wrong")
		return
	}

	f.Seek(0, 0)
	o2, err := svc.WriteChunk(ctx, "d1f187cc-c4c9-465f-9bc7-e20f65ac2c24", 14991, f)
	if err != nil {
		t.Error(err)
		return
	}
	t.Log(o2)

	err2 := svc.FinishUpload(ctx, "d1f187cc-c4c9-465f-9bc7-e20f65ac2c24", map[string]string{
		"hello": "chris",
	})
	if err2 != nil {
		t.Error(err2)
		return
	}

	m, err := svc.GetMetadata(ctx, "d1f187cc-c4c9-465f-9bc7-e20f65ac2c24")
	if err != nil {
		t.Error(err)
		return
	}

	if m != nil {
		t.Log(m)
	}
}
